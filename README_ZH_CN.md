<a name="top"></a>
# Open AI Search (æ”¯æŒ DeepResearch)

<br>
<p align="center">
  åŸºäºAIå¤§è¯­è¨€æ¨¡å‹çš„æœç´¢å¼•æ“ï¼Œæ”¯æŒDeepResearchç”Ÿæˆè¯¦ç»†æŠ¥å‘Šï¼Œæ”¯æŒDeepSeek R1æ·±åº¦æ€è€ƒã€‚åŸºäºNode.js&Vue3ã€‚é€‚åˆæ–°æ‰‹å…¥é—¨AIå¤§æ¨¡å‹å¼€å‘å‚è€ƒ:)ï¼Œæ–‡æ¡£åæœ‰äº¤æµç¾¤äºŒç»´ç ã€‚
</p>
<p align="center">
  <a href="https://isou.chat/">Live Demo</a>
</p>

<p align="center">
  <a href="https://github.com/yokingma/search_with_ai/stargazers"><img src="https://img.shields.io/github/stars/yokingma/search_with_ai" alt="Github Stars"></a>
  <a href="https://github.com/yokingma/search_with_ai/blob/main/LICENSE"><img src="https://img.shields.io/badge/license-MIT-purple" alt="License"></a>
  <a href="https://github.com/yokingma/search_with_ai/issues/new"><img src="https://img.shields.io/badge/Report a bug-Github-%231F80C0" alt="Report a bug"></a>
  <a href="https://github.com/yokingma/search_with_ai/discussions/new?category=q-a"><img src="https://img.shields.io/badge/Ask a question-Github-%231F80C0" alt="Ask a question"></a>
</p>

[English](./README.md) **ä¸­æ–‡** [æ—¥æœ¬èª](./README_JP.md)

<div align="center">
 <img src="./assets/screenshot_cn.jpg"></img>
</div>

ä»“åº“åœ°å€ï¼š[GitHubä»“åº“](https://github.com/yokingma/search_with_ai) [è…¾è®¯CNB](https://cnb.cool/isou/AiSearch)

## åŠŸèƒ½è¯´æ˜

* ğŸ” **æ–°å¢ï¼š** æ”¯æŒç±»ä¼¼OpenAI/Gemini/Perplexityçš„"**Deep Research**"åŠŸèƒ½ã€‚
* å†…ç½®ä¸»æµçš„LLMæ¥å£æ”¯æŒï¼Œå¦‚OpenAIã€Googleã€DeepSeek(R1)ã€SiliconFlowã€è…¾è®¯æ··å…ƒã€é€šè¯‘åƒé—®ã€ç™¾åº¦ã€Leptonã€é›¶ä¸€ä¸‡ç‰©ã€æœˆä¹‹æš—é¢ç­‰ã€‚
* æ”¯æŒæœ¬åœ°å¤§æ¨¡å‹ï¼ˆåŸºäºOllamaã€lmStudioï¼‰ã€‚
* å†…ç½®æœç´¢å¼•æ“æ”¯æŒï¼Œå¦‚Bingã€Sogouã€Googleã€[Tavily](https://tavily.com/)ã€[SearXNG](https://github.com/searxng/searxng), æ”¯æŒChatGLM Webæœç´¢æ’ä»¶ [ä½œä¸ºæœç´¢å¼•æ“, ç›®å‰å…è´¹]ã€‚
* ç®€æ´çš„æœç´¢å¯¹è¯Webç•Œé¢ï¼Œæ”¯æŒæš—è‰²æ¨¡å¼ã€ç§»åŠ¨ç«¯ã€‚
* æ”¯æŒæœç´¢å¼•æ“åˆ‡æ¢ã€AIæ¨¡å‹åˆ‡æ¢ã€‚
* æ”¯æŒå¤šè¯­è¨€ï¼ˆi18nï¼‰ã€‚
* æ”¯æŒæ ¹æ®ä¸Šä¸‹æ–‡ç»“æœç»§ç»­é—®ç­”ã€‚
* æ”¯æŒå›ç­”ç»“æœç¼“å­˜ï¼ˆå¯ä»¥å¼ºåˆ¶åˆ·æ–°ï¼‰ã€‚
* æ”¯æŒå›¾ç‰‡æœç´¢ã€‚

## å…³äº DeepResearch

æ”¯æŒç±»ä¼¼OpenAI/Gemini/Perplexityçš„"Deep Research"åŠŸèƒ½ï¼Œé€šè¿‡æœç´¢å¼•æ“ï¼ŒWebåˆ®å‰Šå’ŒAIå¤§æ¨¡å‹å¯¹ä»»ä½•ä¸»é¢˜æˆ–è€…é—®é¢˜è¿›è¡Œè¿­ä»£ï¼Œæ·±å…¥ç ”ç©¶å¹¶ç”ŸæˆæŠ¥å‘Šã€‚é¡¹ç›®å‚è€ƒäº†[dzhng/deep-research](https://github.com/dzhng/deep-research)çš„å®ç°ã€‚

https://github.com/user-attachments/assets/da5e038d-5e0a-4a6f-bae2-b1a58eee193e

**æ³¨æ„:**

- **è­¦å‘Š:** æ¶ˆè€—å¤§é‡Tokens.
- éœ€è¦AIæ¥å£æ”¯æŒ`Function Calling`.
- ä½¿ç”¨JINA.aiæå–ç½‘é¡µå†…å®¹(å¯ä»¥ä¸é…ç½®KEY, å…è´¹é™é€Ÿ: 20RPM).

**å·¥ä½œæµç¨‹:**

1. åˆ†æç”¨æˆ·æŸ¥è¯¢
2. ç”Ÿæˆè·Ÿè¿›é—®é¢˜ä»¥ç»†åŒ–ç ”ç©¶æ–¹å‘
3. ç”Ÿæˆå¹¶æ‰§è¡Œæœç´¢æŸ¥è¯¢
4. å¤„ç†å’Œåˆ†ææœç´¢ç»“æœ
5. åŸºäº`æ­¥éª¤4`è¿›è¡Œé€’å½’æ¢ç´¢
6. ç”Ÿæˆå…¨é¢çš„æŠ¥å‘Š

> [!NOTE]
> å¦‚æœä½ æƒ³åœ¨è‡ªå·±çš„(Node.js)é¡¹ç›®ä¸­é›†æˆDeepResearchçš„èƒ½åŠ›ï¼Œæ¨èä½¿ç”¨ä¸‹é¢è¿™ä¸ªnpmåŒ…ï¼Œ åŸºäºLangGraphæ„å»ºï¼Œè¯¦ç»†ä½¿ç”¨è¯´æ˜ï¼š[DeepResearch](https://github.com/yokingma/deepresearch)

```shell
npm install deepsearcher
```

## ä½¿ç”¨ Docker å®‰è£…éƒ¨ç½²

**æ³¨æ„ï¼šä½¿ç”¨SearXNGæœç´¢å¼•æ“è¯·ç¡®ä¿ä½ çš„ç½‘ç»œèƒ½æ­£å¸¸è®¿é—®åˆ°Google**

[å®‰è£…Docker](https://docs.docker.com/install/).

```shell
docker pull docker.cnb.cool/aigc/aisearch
```

> é¡¹ç›®é¢„æ„å»ºDockeré•œåƒ [CNB.cool](https://cnb.cool/aigc/AiSearch) (å›½å†…é•œåƒæº > åˆ¶å“åº“)

1ã€**å…‹éš†ä»“åº“**

```shell
git clone https://github.com/yokingma/search_with_ai.git
cd search_with_ai
```

2ã€**ç¼–è¾‘** [.env.docker](https://github.com/yokingma/search_with_ai/blob/main/.env) æ–‡ä»¶ä½äº```deploy```ç›®å½•ä¸‹

åœ¨æ­¤å¤„é…ç½®ä½ çš„KEY[å¦‚ OpenAIã€Googleã€DeepSeekã€é˜¿é‡Œäº‘ ]å³å¯ã€‚
> å¦‚æœä¿®æ”¹äº†.env.dockeræ–‡ä»¶ï¼Œåªéœ€è¦é‡å¯Dockerå®¹å™¨å³å¯ç”Ÿæ•ˆã€‚

```shell
# ç¤ºä¾‹
# openai KEY, docker compose é»˜è®¤å¸¦äº†FreeGPT35ï¼Œå¦‚æœä½ æ²¡æœ‰è‡ªå·±çš„Key, è¿™é‡Œä¿æŒé»˜è®¤
OPENAI_KEY=#your key
...
# docker compose éƒ¨ç½²é»˜è®¤å¸¦äº†SearXNGèšåˆæœç´¢, é»˜è®¤ä¸éœ€è¦ä¿®æ”¹
SEARXNG_HOSTNAME=http://searxng:8080
```

3ã€[å¯é€‰] å¦‚æœéœ€è¦ä¿®æ”¹`BaseUrl`ã€`æ¨¡å‹åç§°`, è¯·ä¿®æ”¹[model.json](https://github.com/yokingma/search_with_ai/blob/main/deploy/model.json)æ–‡ä»¶ã€‚

```json
{
  "provider": "openai",
  "type": "openai",
  "baseURL": "https://api.openai.com/v1",
  "models": ["o1-preview", "o1-mini", "gpt-4o", "gpt-4o-mini"]
}
```

4ã€åœ¨```deploy```ç›®å½•ä¸‹è¿è¡Œï¼š

```shell
# é»˜è®¤åŒ…å«äº† SearXNG æœåŠ¡
docker compose up -d
```

æµè§ˆå™¨è®¿é—® <http://localhost:3000>

5ã€ **æ›´æ–°**

- æ‰‹åŠ¨åˆ é™¤æ—§ç‰ˆæœ¬çš„é•œåƒï¼ˆå¦‚æœéœ€è¦ï¼‰
- æ‰§è¡Œ ```docker compose down```
- æ‰§è¡Œ ```docker compose up -d```

## æœç´¢å¼•æ“é…ç½®

å†…ç½®äº†æœç´¢å¼•æ“æœåŠ¡ï¼šBingã€Sogouã€Googleã€SearXNGã€‚

#### æ¨èä½¿ç”¨SearXNG (å…è´¹å¼€æºï¼Œä¸éœ€è¦KEY)

å®‰è£… [SearXNG](https://github.com/searxng/searxng) ï¼Œæ¨èç”¨Dockeréƒ¨ç½² [searxng-docker](https://github.com/searxng/searxng-docker)
> SearXNG æ˜¯ä¸€æ¬¾å…è´¹çš„äº’è”ç½‘å…ƒæœç´¢å¼•æ“ï¼Œå®ƒé›†åˆäº†æ¥è‡ªå¤šä¸ªæœç´¢æœåŠ¡å’Œæ•°æ®åº“çš„ç»“æœã€‚è¯¥æœåŠ¡ä¸ä¼šè¿½è¸ªæˆ–æ„å»ºå…¶ç”¨æˆ·æ¡£æ¡ˆï¼Œä¸ºå¯»æ±‚åœ¨çº¿åŒ¿åæ€§çš„ç”¨æˆ·æä¾›ä¿æŠ¤ã€‚æ­¤å¤–ï¼ŒSearXNG è¿˜å¯é€šè¿‡ Tor ç½‘ç»œæ¥å®ç°åœ¨çº¿åŒ¿åè®¿é—®ã€‚

å®‰è£… SearXNG æ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹å”¯ä¸€å¤„äºæ¿€æ´»çŠ¶æ€çš„è¾“å‡ºæ ¼å¼æ˜¯ HTML æ ¼å¼ã€‚è‹¥è¦ä½¿ç”¨ APIï¼Œæ‚¨éœ€è¦å¯ç”¨ json æ ¼å¼ã€‚å¯ä»¥é€šè¿‡åœ¨ settings.yml æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹è¡Œæ¥å®ç°ï¼š

```yaml
search:
    formats:
        - html
        - json
```

å¹¶ä¸”éœ€è¦è®¾ç½®limiterä¸ºfalse:

```yaml
server:
   limiter: false # default is true
```

ä¹Ÿå¯ä»¥è®¾ç½®SEARXNG_HOSTNAME (ç¼–è¾‘.envæ–‡ä»¶):

```shell
# SEARXNG_HOSTNAME=<host>
```

#### Bingæœç´¢

å¦‚æœè¦ä½¿ç”¨å¿…åº”æœç´¢ï¼Œéœ€è¦æ³¨å†Œå¹¶è®¢é˜…[Bingæœç´¢æœåŠ¡](https://www.microsoft.com/en-us/bing/apis/bing-web-search-api)ï¼Œè·å–å¿…åº”è®¢é˜…å¯†é’¥(key)ã€‚

> Bingæœç´¢æ¥å£æ˜¯æ”¶è´¹çš„ï¼Œä½†æ˜¯æ¯æœˆæœ‰1000æ¬¡å…è´¹è°ƒç”¨é¢åº¦ã€‚

#### Googleæœç´¢

å¦‚æœè¦ä½¿ç”¨è°·æ­Œæœç´¢å¼•æ“ï¼Œ éœ€è¦[æ³¨å†Œè°·æ­Œæœç´¢APIæœåŠ¡](https://developers.google.com/custom-search)ï¼Œæ¯å¤©æœ‰100æ¬¡å…è´¹æœç´¢é¢åº¦ã€‚

#### Sogouæœç´¢

å†…ç½®çš„Sogouæœç´¢å¹¶éç›´æ¥è°ƒç”¨APIå®ç°ï¼Œåªæ˜¯é€šè¿‡ç®€å•çš„ç½‘é¡µçˆ¬å–è·å–æœç´¢ç»“æœã€‚
> å†…ç½®çš„Sogouæœç´¢æœ¬åœ°æµ‹è¯•ç”¨ï¼ˆåªæ˜¯ç®€å•çš„ç½‘é¡µçˆ¬å–ï¼‰ï¼Œ**ä¼šè§¦å‘äººæœºéªŒè¯**ï¼Œé‡åˆ°ä¸è¿”å›å‚è€ƒèµ„æ–™çš„æƒ…å†µå¯ä»¥æ‰‹åŠ¨æ‰“å¼€sogou.coméšä¾¿æœç´¢å…³é”®è¯ï¼Œæ ¹æ®æç¤ºæ‰‹åŠ¨éªŒè¯ä¸€ä¸‹è§£é™¤ã€‚

#### ChatGLM Web Searchæ’ä»¶
[2024/09/17] æ–°å¢æ™ºè°±AIçš„ChatGLM Web Searchæ’ä»¶ï¼Œä½œä¸ºä¸­æ–‡æœç´¢å¼•æ“ä½¿ç”¨ã€‚
> æ™ºè°±AIçš„glm-flashç›®å‰å…è´¹ï¼Œå…¶Web Searchæ’ä»¶ç›®å‰ä¹Ÿæ˜¯å…è´¹ï¼ŒåŸºäºç»“åˆè¿™ä¸¤è€…æ–°å¢äº†ChatGLMä½œä¸ºå…è´¹çš„ä¸­æ–‡æœç´¢å¼•æ“ã€‚

#### Jina Reader URL API
[2024/11/24] æ–°å¢[Jina](https://jina.ai/) Reader URL APIï¼Œæ”¯æŒå®Œæ•´çš„ç½‘é¡µå†…å®¹æŠ“å–ã€‚
WEBé¡µé¢é€‰æ‹©[ç ”ç©¶]é€‰é¡¹æ¨¡å¼çš„æ—¶å€™ä¼šè°ƒç”¨Jina APIæŠ“å–ç½‘é¡µçš„å…¨æ–‡å†…å®¹ä½œä¸ºAIçš„ä¸Šä¸‹æ–‡å‚è€ƒèµ„æ–™ï¼Œéœ€è¦é…ç½®JINA_KEYï¼š

```shell
# JINA API KEY
JINA_KEY=#your key
```

## éƒ¨ç½²&å¼€å‘

> Node.js >= 20
> Turborepo
> PackageManager: yarn@3.5.1

* **é¡¹ç›®ç»“æ„**

```text
apps/
  | server: æœåŠ¡ç«¯
  | web: å‰ç«¯
deploy/
  | docker-compose.yaml: dockeréƒ¨ç½²æ–‡ä»¶
  | .env.docker: æœåŠ¡ç«¯å‚æ•°é…ç½®æ–‡ä»¶
  | model.json: æœåŠ¡ç«¯æ¨¡å‹é…ç½®æ–‡ä»¶
  ...
```

* **å¼€å‘&æ„å»º**
åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­æ‰§è¡Œ:

```shell
turbo dev
# or
turbo build
```

* **æ›´æ–°**
åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ

```shell
git pull
```

## API

é¡¹ç›®å‰åç«¯åˆ†ç¦»ï¼Œ å¦‚æœä½ éœ€è¦ä½¿ç”¨APIæœåŠ¡ï¼Œä¹Ÿå¯ä»¥å•ç‹¬éƒ¨ç½²åç«¯æœåŠ¡ã€‚

HOST: <http://localhost:3000>

- ```POST /api/search```  AIæœç´¢

```json
// è¯·æ±‚å‚æ•° Request body
{
  "q": "ä»Šæ—¥æ–°é—»", // [å¿…å¡«]æœç´¢å…³é”®è¯
  "model": "qwen-max", // [å¿…å¡«]æ¨¡å‹åç§°
  "provider": "ollama", // [å¿…é€‰]å¤§æ¨¡å‹æœåŠ¡[], å¦‚ollamaã€lmstudioã€openaiã€deepseekç­‰
  "engine": "bing", // [å¿…å¡«]æœç´¢å¼•æ“ï¼Œé»˜è®¤bing

  "stream": true, // [å¯é€‰]æ˜¯å¦æµå¼è¾“å‡ºï¼Œé»˜è®¤true
  "reload": false, // [å¯é€‰]æ˜¯å¦å¼ºåˆ¶åˆ·æ–°ç¼“å­˜ï¼Œé»˜è®¤false
  "categories": [], // [å¯é€‰]SearXNGæœç´¢å¼•æ“åˆ†ç±»ï¼Œé»˜è®¤[]
  "mode": "simple", // [å¯é€‰]æœç´¢æ¨¡å¼ï¼Œtype TMode = "simple" | "deep" | "research"
  "language": "all", // [å¯é€‰]SearXNGæœç´¢å¼•æ“è¯­è¨€
}
```

**[stream = false] éæµå¼è¾“å‡º**

```json
// å“åº”å‚æ•° Response body
{
  "reasoningContent": "text", // AIæ¨ç†è¿‡ç¨‹[å¦‚æœæœ‰]
  "content": "text", // AIå›ç­”ç­”æ¡ˆ
  "contexts": [], // ä¸Šä¸‹æ–‡æœç´¢ç»“æœ
  "related": [], // ç›¸å…³æœç´¢é—®é¢˜
  "images": [], // å›¾ç‰‡æœç´¢ç»“æœ
}
```

**[stream = true] æµå¼è¾“å‡º**

```text
data: {"data": { "reasoningContent": "..." } }\n\n
data: {"data": { "answer": "I" } }\n\n
data: {"data": { "answer": "'m " } }\n\n
data: {"data": { "answer": "a robot" } }\n\n
data: {"data": { "image": {...} } }\n\n
data: {"data": { "image": {...} } }\n\n
data: {"data": { "context": {...} } }\n\n
data: {"data": { "context": {...} } }\n\n
data: {"data": { "related": {...} } }\n\n
data: {"data": { "related": {...} } }\n\n
```

å‚æ•°ç±»å‹è¯´æ˜

```ts
// æœç´¢å¼•æ“æ”¯æŒç±»å‹
export enum ESearchEngine {
  GOOGLE = 'GOOGLE',
  BING = 'BING',
  SOGOU = 'SOGOU',
  SEARXNG = 'SEARXNG',
  CHATGLM = 'CHATGLM'
}

// SearXNGæœç´¢å¼•æ“åˆ†ç±»
export enum ESearXNGCategory {
  SCIENCE = 'science',
  IT = 'it',
  GENERAL = 'general',
  IMAGES = 'images',
  VIDEOS = 'videos',
  NEWS = 'news',
  MUSIC = 'music'
}

// æœç´¢æ¨¡å¼
export type TMode = 'simple' | 'deep' | 'research'
```

- ```GET /api/models``` è·å–å¯ç”¨æ¨¡å‹åˆ—è¡¨[åªèƒ½è·å¾—æä¾›äº†KEYçš„æ¨¡å‹]

## è”ç³»

<div align="center">
  <img width="320" src="./assets/appreciate.jpg"></img>
  <div>å¦‚æœä½ å–œæ¬¢è¿™ä¸ªé¡¹ç›®</div>
</div>

<div align="center">
 <img width="320" src="./assets/wechat.jpg"></img>
 <div>æ‰«ç æ·»åŠ åŠ©æ‰‹è¿›ç¾¤äº¤æµ</div>
</div>

## è®¸å¯è¯

æ­¤å­˜å‚¨åº“çš„æºä»£ç åœ¨[MITè®¸å¯è¯](LICENSE)ä¸‹æä¾›ã€‚

[ğŸš€å›åˆ°é¡¶éƒ¨](#top)